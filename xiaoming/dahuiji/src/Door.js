/** * Create By Liangdong * */var Door = cc.Sprite.extend({    _state: null,    _doorNormal: null,    _doorOpen: null,    _surprised: null,    _knob: null,    _mother: null,    ctor: function() {        this._super();    },    init: function() {        this.config();        this._doorNormal = cc.Sprite.create(s_door_normal);        g_utils.setPPS(this._doorNormal, cc.p(0,0), cc.p(0,0));        this.addChild(this._doorNormal);        this._doorOpen = cc.Sprite.create(s_door_open);        this._doorOpen.setVisible(false);        g_utils.setPPS(this._doorOpen, cc.p(0,0), cc.p(0,0));        this.addChild(this._doorOpen);        this._surprised = cc.Sprite.create(s_door_surprised);        this._surprised.setVisible(false);        g_utils.setPPS(this._surprised, cc.p(-50,460), cc.p(0,0));        this.addChild(this._surprised);        this._knob = cc.Sprite.create(s_doorknob);        g_utils.setPPS(this._knob, cc.p(25,250), cc.p(0.2,0.2));        this.addChild(this._knob);        this.doorReaOpen();    },    config: function() {        this._name = "door";        this.initWithFile(s_tm);        g_utils.setPPS(this, cc.p(820,60), cc.p(0,0));    },    doorReaOpen: function() {        if(this._state)            return false;        this._state = true;        var rotate = cc.RotateBy.create(1, 90);//        var rep1 = cc.RepeatForever.create(rotate); //循环旋转        this._knob.runAction(cc.Sequence.create(            rotate,            cc.CallFunc.create(this.doorOpen,this),            rotate.reverse(),//            cc.DelayTime.create(2),            cc.CallFunc.create(this.surprised,this)        ) );//执行        return true;    },    doorOpen: function() {        this._doorNormal.setVisible(false);        this._knob.setVisible(false);        this._doorOpen.setVisible(true);    },    surprised: function() {        this._surprised.setVisible(true);        var blink = cc.Blink.create(2, 10);        this._surprised.runAction(blink);    },    doorClose: function() {        this._knob.stopAllActions();        this._knob.setVisible(true);        this._doorNormal.setVisible(true);        this._surprised.setVisible(false);        this._doorOpen.setVisible(false);        this._state = false;    }});Door.create = function() {    var obj = new Door();    obj.init();    return obj;};